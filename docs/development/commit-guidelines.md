# Commit Guidelines

## コミットメッセージ規約

このプロジェクトでは、**WHY（なぜ）** を重視したコミットメッセージを採用しています。

### 基本形式

```
<type>: <subject>

<body>

<footer>
```

### Type（変更の種類）

| Type | 説明 | 例 |
|------|------|-----|
| `feat` | 新機能の追加 | ブックマーク機能、認証機能 |
| `fix` | バグ修正 | APIエラー修正、UI表示不具合 |
| `docs` | ドキュメントのみの変更 | README更新、API仕様書 |
| `style` | コードの意味に影響しない変更 | フォーマット、空白 |
| `refactor` | バグ修正でも機能追加でもないコード変更 | 構造改善、最適化 |
| `test` | テストの追加や既存テストの修正 | 単体テスト、統合テスト |
| `chore` | ビルドプロセスやツール変更 | 依存関係更新、設定変更 |
| `perf` | パフォーマンス改善 | クエリ最適化、レンダリング改善 |
| `ci` | CI設定ファイルやスクリプトの変更 | GitHub Actions、ビルド設定 |
| `revert` | 以前のコミットの取り消し | 不具合のあるコミットの取り消し |

### Subject（件名）

- **50文字以内**で変更内容を要約
- **現在形、命令形**で記述（"add" not "added" or "adds"）
- **最初の文字は小文字**
- **末尾にピリオドは不要**

### Body（本文）

**WHYを重視した詳細説明**：

- **変更の理由・背景・影響**を説明
- **「何をしたか」ではなく「なぜしたか」**を重視
- **72文字で改行**
- 複数の変更がある場合は**箇条書き**で整理

### Footer（フッター）

関連するIssueやタスク番号：

- `Closes #123` - Issueをクローズ
- `Refs #456` - Issue参照
- `Task 6.1.2` - タスク番号

## 良い例

```
feat: add bookmark functionality to exam questions

ユーザーが重要な問題を後で見返せるように、ブックマーク機能を追加。
学習効率向上のため、間違えた問題と合わせて復習できる仕組みを提供。

- BookmarkモデルとAPI実装
- フロントエンドのブックマーク状態管理  
- 既存の問題一覧画面にブックマークボタン追加

Task 6.1.2
```

## 悪い例

```
fix: fixed bug

バグを修正した
```

## コミットテンプレートの使用

```bash
# テンプレートが自動適用されます
git commit

# テンプレートを手動で適用
git config commit.template .gitmessage
```

## 自動コミットの場合

Hookによる自動コミットの場合も、可能な限りこの形式に従います：

```
chore: auto-commit after agent work - 2024-08-02 14:30:00

エージェント作業完了後の自動コミット。
開発フローの効率化とやりっぱなし防止のため。

- YAMLフロントマター修正
- settings.local.json更新
```